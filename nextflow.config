profiles {

  // Default profile, best suited for local runs
  standard {
    docker.enabled = true
    
    process {
      withName:illumination {container = 'labsyspharm/basic-illumination:latest'}
      withName:ashlar       {container = 'labsyspharm/ashlar:1.11.1'}
      withName:unmicst      {container = 'labsyspharm/unmicst:latest'}
      withName:s3seg        {container = 'labsyspharm/s3segmenter:latest'}
    }
  }

  // Profile specific to the HMS compute cluster
  O2 {
    params.tools        = '/n/groups/lsp/mcmicro'

    params.tool_imagej  = "${params.tools}/Fiji.app"
    params.tool_illum   = "${params.tools}/basic-illumination"
    params.tool_unmicst = "${params.tools}/UnMicst"
    params.tool_segment = "${params.tools}/S3segmenter"
    params.tool_quant   = "${params.tools}/quantification"

    process {
      executor = 'slurm'
      queue = 'short'

      withName:illumination {clusterOptions = '-t 1:00:00 --mem=16000'}
      withName:ashlar       {clusterOptions = '-t 1:00:00 --mem=16000'}
      withName:dearray      {clusterOptions = '-t 1:00:00 --mem=16000'}
      withName:unmicst {
        conda = "$baseDir/conda/unmicst.yml"
        clusterOptions = '-t 1:00:00 --mem=4000'
      }
      withName:s3seg {
        conda = "$baseDir/conda/s3seg.yml"
        clusterOptions = '-t 1:00:00 --mem=4000'
      }
      withName:quantification {
        conda = "$baseDir/conda/quantification.yml"
        clusterOptions = '-t 1:00:00 --mem=16000'
      }
    }	    
  }
}
